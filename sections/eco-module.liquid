<!-- eco module section -->
<div class="eco-container w-full h-auto flex flex-col items-start justify-center p-4 mb-10 lg:items-center lg:mb-0" style="background: linear-gradient(180deg, #6F6060 0%, rgba(146, 143, 143, 0.00) 100%);">
  <div class="eco-container-primary w-full h-auto flex flex-col gap-y-10 lg:pt-10 lg:items-center">
    <h2 class="header-2 text-white lg:big-header-1 lg:text-center">{{ section.settings.section_heading }}</h2>
    <div class="container-image-w-hotspot w-auto h-auto mb-10">
      <img
        class="w-auto h-auto min-w-[343px] min-h-[172px] object-contain lg:h-[670px] lg:w-[1335px]"
        src="{{ section.settings.section_etic_code_boat_image |  img_url: 'master' }}"
        alt="{{ section.settings.section_etic_code_boat_image.alt }}">
    </div>
  </div>
  <div class="eco-container-secondary w-full h-auto shadow-custom rounded-xl flex flex-col gap-y-4 items-start justify-center p-4 bg-white lg:w-auto lg:p-6">
    <p class="body-14">{{ section.settings.section_etic_code }}</p>
    <p class="body-16 italic">{{ section.settings.section_etic_code_cit }}</p>
    <p class="body-12 text-[var(--hover-accent-color)]">{{ section.settings.section_etic_code_content }}</p>
    <div class="eco-content-cta w-full h-auto flex items-start justify-center">
      <div class="cta-eco w-full">
        <p class="body-14">{{ section.settings.section_etic_code_download }}</p>
      </div>
    </div>
  </div>
</div>
<!-- innovation section -->
<div
  class="innovation-container w-full h-auto flex flex-col gap-y-4 items-start justify-center p-4 mb-10 lg:items-center lg:gap-y-6 relative">

  <div
    class="innovation-container-primary w-full h-auto flex flex-col gap-y-4 rounded-lg shadow-custom p-4 lg:w-auto lg:px-6 lg:pt-6 lg:pb-10 lg:mb-10">
    <p class="body-14">{{ section.settings.section_heading }}</p>
    <p class="body-16 italic">{{ section.settings.section_heading_secondary }}</p>
    <p class="body-12 text-[var(--hover-accent-color)]">{{ section.settings.section_content }}</p>
  </div>

  <!-- arrow box -->
  <div class="w-full h-auto hidden lg:flex lg:justify-end lg:gap-x-2 ">
    <button id="prevArrow"
      class="carousel-arrow left-arrow flex items-center justify-center w-10 h-10 rounded-full border border-black text-white">
      {% render 'arrow-left-icon' %}
    </button>
    <button id="nextArrow"
      class="carousel-arrow right-arrow flex items-center justify-center w-10 h-10 rounded-full border border-black text-white">
      {% render 'arrow-right-icon' %}
    </button>
  </div>

  <div class="relative w-full h-auto">
    <div
      class="innovation-container-scrolling w-full h-auto flex flex-row items-center justify-start gap-x-3 overflow-x-auto lg:overflow-hidden">
      {% for block in section.blocks %}

      {% if block.type == "scroll-image" %}
      <div class="container-scroll-image w-auto h-auto">
        <img src="{{ block.settings.scroll_image | img_url: 'master' }}" alt="{{ block.settings.scroll_image.alt }}"
          class="w-[313px] min-w-[313px] h-[210px] object-cover object-center rounded-md">
      </div>
      {% endif %}
      {% endfor %}
    </div>
  </div>

  <div class="innvation-content-cta w-full h-auto flex items-start justify-center">
    <div class="cta-primary">
      <p class="body-14">{{ section.settings.section_content_cta }}</p>
    </div>
  </div>
</div>



<style>
  .carousel-arrow.disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  .carousel-arrow:not(.disabled) {
    opacity: 1;
    pointer-events: auto;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const prevArrow = document.getElementById('prevArrow');
    const nextArrow = document.getElementById('nextArrow');
    const scrollContainer = document.querySelector('.innovation-container-scrolling');
    const images = Array.from(scrollContainer.querySelectorAll('img'));

    if (images.length > 1) {
      const firstImage = images[0];
      const secondImage = images[1];

      const firstImageLeft = firstImage.offsetLeft;
      const secondImageLeft = secondImage.offsetLeft;
      const scrollAmount = secondImageLeft - firstImageLeft;

      function updateArrows() {
        const currentScrollLeft = scrollContainer.scrollLeft;
        const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;

        prevArrow.classList.toggle('disabled', currentScrollLeft === 0);
        nextArrow.classList.toggle('disabled', currentScrollLeft >= maxScrollLeft);
      }

      function scrollContainerBy(amount) {
        const currentScrollLeft = scrollContainer.scrollLeft;
        const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;

        let newScrollLeft = currentScrollLeft + amount;

        if (newScrollLeft < 0) {
          newScrollLeft = 0;
        } else if (newScrollLeft > maxScrollLeft) {
          newScrollLeft = maxScrollLeft;
        }

        scrollContainer.scrollTo({
          left: newScrollLeft,
          behavior: 'smooth'
        });

        setTimeout(updateArrows, 300);
      }

      if (prevArrow && nextArrow && scrollContainer) {
        prevArrow.addEventListener('click', function () {
          scrollContainerBy(-scrollAmount);
        });

        nextArrow.addEventListener('click', function () {
          scrollContainerBy(scrollAmount);
        });

        updateArrows();
        scrollContainer.addEventListener('scroll', updateArrows);
      }
    }
  });
</script>


{% schema %}
  {
    "name": "eco-values",
    "settings": [
      {
        "type": "text",
        "id": "section_heading",
        "default": "Design with an eco-sustainable soul",
        "label": "Section Heading"
      },
      {
        "type": "text",
        "id": "section_etic_code",
        "default": "Etic code",
        "label": "Section Etic Code"
      },
      {
        "type": "text",
        "id": "section_etic_code_cit",
        "default": "Designing luxury with an ecological approach",
        "label": "Section Etic Code Cit"
      },
      {
        "type": "image_picker",
        "id": "section_etic_code_boat_image",
        "label": "Section boat image w hostpost"
      }, {
        "type": "text",
        "id": "section_etic_code_content",
        "default": "Sorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vulputate libero et velit interdum, ac aliquet odio mattis.",
        "label": "Section Etic Code Content"
      }, {
        "type": "text",
        "id": "section_etic_code_download",
        "default": "Download etic code",
        "label": "Section Etic Code Download"
      }

    ],
    "presets": [
      {
        "name": "eco-module",
        "category": "custom",
        "settings": {
          "section_heading": "Design dallâ€™anima ecosostenibile",
          "section_etic_code_cit": "Progettare il lusso con un approccio ecologico",
          "section_etic_code_content": "Sorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vulputate libero et velit interdum, ac aliquet odio mattis",
          "section_etic_code_download": "Scarica il codice etico",
          "section_etic_code_boat_image": "shopify:\/\/shop_images\/66_2.png"
        }
      }
    ]
  }
{% endschema %}