<div
   class="navbar w-full h-auto fixed z-50 left-0 top-0 right-0 bg-transparent px-4 py-4 transition-colors duration-300 ease-in-out">
   <div class="navbar-container flex items-center justify-between flex-row relative pb-2">
      <div class="menu-yachts-label transition-colors duration-300 ease-in-out">
         <p class="body-small chip-text">Yachts</p>
      </div>
      <div
         class="menu-logo-container w-[93px] h-[23px] flex-shrink-0 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
         <div class="pardo-logo w-full h-full">
            <img id="pardo-logo" class="object-contain w-full h-full"
               src="https://cdn.shopify.com/s/files/1/0841/6572/2445/files/pardo-logo-white.png?v=1724337625"
               alt="pardo-logo">
         </div>
      </div>
      <div class="menu-icon w-auto h-auto text-white transition-colors duration-300 ease-in-out">
         {% render 'menu-icon' %}
      </div>
   </div>
   <div class="yatch-menu-container w-full h-auto flex-col gap-y-10 mt-6 hidden">
      <div class="main-manu-container w-full h-auto flex flex-col gap-y-6">
         {% for link in linklists.yatch.links %}
         {% assign matching_collection = collections[link.object.handle] %}
         {% assign product_count = 0 %}
         {% if matching_collection %}
         {% assign product_count = matching_collection.products_count %}
         {% endif %}

         <li class="header-1-medium text-white list-none inline-flex items-center relative">
            <div class="relative inline-block">
               {{ link.title | link_to: link.url }}
               {% if matching_collection %}
               {% if product_count.size > 0 %}
               <span
                  class="product-count absolute top-0 -right-2 text-white body-16 px-2 py-1 transform translate-x-1/2 -translate-y-1/2">
                  {{ product_count }}
               </span>
               {% endif %}
               {% endif %}
            </div>
         </li>
         {% endfor %}
      </div>
   </div>
</div>



<script>
  document.addEventListener('DOMContentLoaded', () => {
    const navbar = document.querySelector('.navbar');
    const menuIcon = document.querySelector('.menu-icon');
    const menuChip = document.querySelector('.menu-yachts-label');
    const logo = document.getElementById('pardo-logo');
    const menuYatch = document.querySelector('.yatch-menu-container');
    const chipText = document.querySelector('.chip-text');

    // Crea un elemento <style> e aggiungilo al <head>
    const styleElement = document.createElement('style');
    styleElement.innerHTML = `
      .toBlack {
        color: #000;
        border-color: #000;
      }
      .navbar.toBlack {
        background-color: white;
      }
      .toAccent {
        background-color: var(--accent-color);
      }
      .no-scroll {
        overflow: hidden;
      }
    `;
    document.head.appendChild(styleElement);

    function updateNavbarStyle() {
      const isMenuVisible = menuYatch.classList.contains('flex');
      const hasScrolled = window.scrollY > 10;

      // Se il menu è visibile
      if (isMenuVisible) {
        navbar.classList.add('toAccent');
        navbar.classList.remove('toBlack');
        menuIcon.classList.remove('toBlack');
        menuChip.classList.remove('toBlack');
        logo.src = 'https://cdn.shopify.com/s/files/1/0841/6572/2445/files/pardo-logo-white.png?v=1724337625';
      } else {
        // Se il menu non è visibile
        if (hasScrolled) {
          navbar.classList.add('toBlack');
          navbar.classList.remove('toAccent');
          menuIcon.classList.add('toBlack');
          menuChip.classList.add('toBlack');
          logo.src = 'https://cdn.shopify.com/s/files/1/0841/6572/2445/files/pardo-black.png?v=1724339311';
        } else {
          navbar.classList.remove('toBlack', 'toAccent');
          menuIcon.classList.remove('toBlack');
          menuChip.classList.remove('toBlack');
          logo.src = 'https://cdn.shopify.com/s/files/1/0841/6572/2445/files/pardo-logo-white.png?v=1724337625';
        }
      }
    }

    window.addEventListener('scroll', updateNavbarStyle);

    menuChip.addEventListener('click', () => {
      const isMenuHidden = menuYatch.classList.contains('hidden');
      if (isMenuHidden) {
        // Mostra il menu
        menuYatch.classList.remove('hidden');
        menuYatch.classList.add('flex');
        chipText.innerHTML = 'Close';
        document.body.classList.add('no-scroll');
        updateNavbarStyle(); 
      } else {
        // Nascondi il menu
        menuYatch.classList.remove('flex');
        menuYatch.classList.add('hidden');
        chipText.innerHTML = 'Yachts';
        document.body.classList.remove('no-scroll');
        updateNavbarStyle(); 
      }
    });

    updateNavbarStyle();
  });
</script>



