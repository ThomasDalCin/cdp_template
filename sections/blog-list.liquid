<div class="blog-news-container w-full h-auto flex flex-col">
  <div id="news-layout" class="blogs-list-container w-full h-auto flex flex-col gap-y-10 p-4">
    {% if blogs.news %}
    {% assign newsArticles = blogs.news.articles %}
    {% assign totalArticles = newsArticles.size %}
    
    {% if totalArticles > 0 %}
    
    <!-- Primo articolo sulla prima riga -->
    <div class="blog-list-row width-view lg:mb-10">
      <div class="blog-item-width-view w-full h-auto flex flex-col gap-y-4 items-start justify-center lg:relative"
        data-tags="{{ newsArticles[0].tags | join: ',' }}">
        <div class="blog-item-image w-full h-auto">
          <img src="{{ newsArticles[0].image | img_url: 'master' }}"
            class="w-full h-auto min-h-[200px] max-h-[200px] object-cover rounded-xl lg:h-[480px] lg:max-h-[480px]"
            alt="{{ newsArticles[0].image.alt }}">
        </div>
        <div
          class="blog-item-details w-full h-auto flex flex-col items-start justify-center gap-y-4 lg:absolute lg:justify-start lg:right-[16px] lg:top-[16px] lg:w-[calc(100%-32px)] lg:h-[calc(100%-32px)] lg:max-w-[297px] lg:z-10 lg:bg-white lg:rounded-lg lg:p-4">
          <div class="blog-item-details-container w-full h-full relative flex flex-col gap-y-4">
            <div class="blog-item-date w-full h-auto flex flex-row justify-between">
              <p class="body-12">{{ newsArticles[0].published_at | date: '%B %d, %Y' }}</p>
            </div>
            <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
              <h3 class="body-14-medium">{{ newsArticles[0].title | capitalize }}</h3>
              <p class="body-12">{{ newsArticles[0].content | truncate: 300 }}</p>
            </div>
            <div class="blog-item-cta w-full h-auto flex items-center justify-start lg:absolute lg:bottom-0">
              <div class="cta-blog lg:w-full">
                <a href="{{ newsArticles[0].url }}">
                  <p class="body-14-medium">{{ section.settings.article_cta }}</p>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    {% endif %}
    
    {% if totalArticles > 1 %}
    <!-- Calcolo della metà degli articoli rimanenti -->
    {% assign remainingArticles = totalArticles | minus: 1 %}
    {% assign halfSize = remainingArticles | divided_by: 2 %}

    <!-- Seconda riga con la prima metà degli articoli rimanenti -->
    <div class="blog-list-row horizontal-view lg:mb-10">
      <div class="blog-item-horizontal-scroll w-full h-auto overflow-x-auto flex flex-row gap-x-2 p-1 lg:gap-x-4">
        {% for i in (1..halfSize) %}
        <div
          class="blog-item horizontal-view min-w-[200px] min-h-[386px] flex flex-col items-start justify-start shadow-custom rounded-xl lg:w-[400px] relative"
          data-tags="{{ newsArticles[i].tags | join: ',' }}">
          <div class="blog-item-image w-full h-auto">
            <img src="{{ newsArticles[i].image | img_url: 'master' }}"
              class="w-full h-auto min-h-[160px] max-h-[160px] object-cover rounded-tl-xl rounded-tr-xl"
              alt="{{ newsArticles[i].image.alt }}">
          </div>
          <div
            class="blog-item-info-container w-full h-auto p-2 flex flex-col gap-y-1 lg:flex-col-reverse lg:gap-y-10 lg:p-6">
            <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-1">
              <h3 class="body-14-medium">{{ newsArticles[i].title | capitalize }}</h3>
              <p class="body-12">{{ newsArticles[i].content | truncate: 100 }}</p>
            </div>
          </div>
          <div
            class="blog-item-date w-full h-auto flex flex-row justify-between absolute left-2 bottom-4 lg:left-6 lg:bottom-6">
            <p class="body-12">{{ newsArticles[i].published_at | date: '%B %d, %Y' }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    
    <!-- Terza riga con la seconda metà degli articoli rimanenti -->
    <div class="blog-list-row horizontal-view lg:mb-10">
      <div class="blog-item-horizontal-scroll w-full h-auto overflow-x-auto flex flex-row gap-x-2 p-1 lg:gap-x-4">
        {% assign startIndex = halfSize | plus: 1 %}
        {% for i in (startIndex..remainingArticles) %}
        <div
          class="blog-item-horizontal-view min-w-[250px] h-auto flex flex-col gap-y-4 items-start justify-start rounded-lg lg:w-[812px]"
          data-tags="{{ newsArticles[i].tags | join: ',' }}">
          <div class="blog-item-image w-full h-auto">
            <img src="{{ newsArticles[i].image | img_url: 'master' }}"
              class="w-full h-auto min-h-[250px] max-h-[250px] object-cover rounded-lg" alt="{{ newsArticles[i].image.alt }}">
          </div>
          <div class="blog-item-date w-full h-auto flex flex-row justify-between">
            <p class="body-12">{{ newsArticles[i].published_at | date: '%B %d, %Y' }}</p>
          </div>
          <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
            <h3 class="body-14-medium">{{ newsArticles[i].title | capitalize }}</h3>
          </div>
          <div class="blog-item-cta w-full h-auto flex items-center justify-start">
            <div class="cta-blog">
              <a href="{{ newsArticles[i].url }}">
                <p class="body-14-medium">{{ section.settings.article_cta }}</p>
              </a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    {% endif %}
    {% endif %}
</div>




<!-- Layout for Press Room (Hidden by default) -->
<div id="pressroom-layout" class="blogs-list-container press-room hidden w-full h-auto flex flex-col gap-y-3">
  <!-- Press Room articles loop -->
  {% for article in blogs.news.articles %}
  {% if article.tags contains 'Press room' %}
  <div class="blog-item-press-room w-full h-auto flex flex-col gap-y-4 p-4 lg:relative lg:overflow-hidden">
    <div class="blog-item-image w-full h-auto flex flex-col gap-y-4 relative lg:overflow-hidden">
      <img src="{{ article.image | img_url: 'master' }}"
        class="w-full h-auto min-h-[200px] max-h-[200px] object-cover rounded-xl lg:h-[480px] lg:max-h-[480px]"
        alt="{{ article.image.alt }}">
      <div
        class="blog-item-details flex flex-col gap-y-4 lg:absolute lg:top-[16px] lg:right-[16px] lg:w-[calc(100%-32px)] lg:h-[calc(100%-32px)] lg:max-w-[297px] lg:bg-white lg:rounded-lg lg:p-4 lg:shadow-lg">
        <div class="blog-item-date w-full h-auto flex flex-row justify-between">
          <p class="body-12">{{ article.published_at | date: '%B %d, %Y' }}</p>
        </div>
        <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
          <h3 class="body-14-medium">{{ article.title | capitalize }}</h3>
          <p class="body-12">{{ article.content | truncate: 100 }}</p>
        </div>
        <div class="blog-item-cta w-full h-auto flex items-center justify-start">
          <div class="cta-download flex items-center gap-x-2">
            <a href="{{ article.url }}">
              <p class="body-14-medium">{{ section.settings.download_article_cta }}</p>
            </a>
            {% render 'download-icon' %}
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  {% endfor %}
</div>

<!-- Layout for Awards (Hidden by default) -->
<div id="awards-layout" class="blogs-list-container awards hidden w-full h-auto flex flex-col gap-y-3">
  {% for article in blogs.news.articles %}
  {% if article.tags contains 'Awards' %}
  <a href="{{ article.url }}">
    <div class="blog-item-awards w-full h-auto flex flex-col gap-y-4 p-4">
      <div class="blog-item-image w-full h-auto">
        <img src="{{ article.image | img_url: 'master' }}"
          class="w-full h-auto min-h-[200px] max-h-[200px] object-cover rounded-xl lg:h-[480px] lg:max-h-[480px]"
          alt="{{ article.image.alt }}">
      </div>
      <div class="blog-item-date w-full h-auto flex flex-row justify-between">
        <p class="body-12">{{ article.published_at | date: '%B %d, %Y' }}</p>
      </div>
      <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
        <h3 class="body-14-medium">{{ article.title | capitalize }}</h3>
        <p class="body-12">{{ article.content | truncate: 100 }}</p>
      </div>
    </div>
  </a>
  {% endif %}
  {% endfor %}
</div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const chips = document.querySelectorAll('.chips-label');
    const newsLayout = document.getElementById('news-layout');
    const pressRoomLayout = document.getElementById('pressroom-layout');
    const awardsLayout = document.getElementById('awards-layout');


    let activeChip = null;

    chips.forEach(chip => {
      chip.addEventListener('click', function () {
        const tag = chip.getAttribute('data-tag');
        newsLayout.classList.add('hidden');
        pressRoomLayout.classList.add('hidden');
        awardsLayout.classList.add('hidden');


        if (tag === 'News') {
          newsLayout.classList.remove('hidden');
        } else if (tag === 'Press room') {
          pressRoomLayout.classList.remove('hidden');
        } else if (tag === 'Awards') {
          awardsLayout.classList.remove('hidden');
        }


        if (activeChip) {
          const previousIcon = activeChip.querySelector('.chips-text svg');
          if (previousIcon) {
            previousIcon.classList.add('-rotate-45');
          }
        }


        chips.forEach(chip => {
          chip.classList.remove('chips-blog-active');
        });

        chip.classList.add('chips-blog-active');


        const currentIcon = chip.querySelector('.chips-text svg');
        if (currentIcon) {
          currentIcon.classList.remove('-rotate-45');
        }

        activeChip = chip;
      });
    });


    const defaultChip = document.querySelector('.chips-label[data-tag="News"]');
    if (defaultChip) {
      defaultChip.classList.add('chips-blog-active');
      newsLayout.classList.remove('hidden');
    }

  });
</script>

{% schema %}
{
"name": "blog-list",
"settings": [
{
"type": "text",
"id": "article_download_cta",
"default": "Download",
"label": "Article Download Cta"
},
{
"type": "text",
"id": "article_cta",
"default": "Read More",
"label": "Article Cta"
}
]
}
{% endschema %}