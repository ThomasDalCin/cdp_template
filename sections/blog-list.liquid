<!-- Layout for News (Visible by default) -->
<div id="news-layout" class="blogs-list-container w-full h-auto flex flex-col gap-y-10 p-4">
    {% if blogs['news'] %}
    {% assign newsArticles = blogs['news'].articles %}
    {% if newsArticles.size > 0 %}
    {% assign first_article = newsArticles[0] %}

    <!-- First row: only one article (for tag 'News') -->
    {% if first_article.tags contains 'News' %}
    <div class="blog-list-row width-view">
        <div class="blog-item width-view w-full h-auto flex flex-col gap-y-4 items-start justify-center"
            data-tags="{{ first_article.tags | join: ',' }}">
            <div class="blog-item-image w-full h-auto">
                <img src="{{ first_article.image | img_url: 'master' }}"
                    class="w-full h-auto min-h-[200px] max-h-[200px] object-cover rounded-xl" alt="article image">
            </div>
            <div class="blog-item-date w-full h-auto flex flex-row justify-between">
                <p class="body-12">{{ first_article.published_at | date: "%B %d, %Y" }}</p>
            </div>
            <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
                <h3 class="body-14-medium">{{ first_article.title }}</h3>
                <p class="body-12">{{ first_article.content | truncate: 300 }}</p>
            </div>
            <div class="blog-item-cta w-full h-auto flex items-center justify-start">
                <div class="cta-blog">
                    <a href="{{ first_article.url }}">
                        <p class="body-14-medium">Leggi di più</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Second row: next three articles for 'News' -->
    <div class="blog-list-row horizontal-view">
        {% assign second_row_articles = newsArticles | slice: 1, 3 %}
        <div class="blog-item-horizontal-scroll w-full h-auto overflow-x-auto flex flex-row gap-x-4 p-3">
            {% for article in second_row_articles %}
            {% if article.tags contains 'News' %}
            <div class="blog-item horizontal-view min-w-[200px] h-auto flex flex-col gap-y-4 items-start justify-start shadow-custom rounded-xl"
                data-tags="{{ article.tags | join: ',' }}">
                <div class="blog-item-image w-full h-auto">
                    <img src="{{ article.image | img_url: 'master' }}"
                        class="w-full h-auto min-h-[160px] max-h-[160px] object-cover rounded-tl-xl rounded-tr-xl"
                        alt="article image">
                </div>
                <div class="blog-item-info-container w-full h-auto p-3 flex flex-col gap-y-4">
                    <div class="blog-item-date w-full h-auto flex flex-row justify-between">
                        <p class="body-12">{{ article.published_at | date: "%B %d, %Y" }}</p>
                    </div>
                    <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
                        <h3 class="body-14-medium">{{ article.title }}</h3>
                        <p class="body-12">{{ article.content | truncate: 100 }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- Third row: remaining articles for 'News' -->
    <div class="blog-list-row horizontal-view">
        {% assign third_row_articles = newsArticles | slice: 3, newsArticles.size %}
        <div class="blog-item-horizontal-scroll w-full h-auto overflow-x-auto flex flex-row gap-x-4 p-3">
            {% for article in third_row_articles %}
            {% if article.tags contains 'News' %}
            <div class="blog-item horizontal-view min-w-[250px] h-auto flex flex-col gap-y-4 items-start justify-start rounded-lg"
                data-tags="{{ article.tags | join: ',' }}">
                <div class="blog-item-image w-full h-auto">
                    <img src="{{ article.image | img_url: 'master' }}"
                        class="w-full h-auto min-h-[250px] max-h-[250px] object-cover rounded-lg" alt="article image">
                </div>
                <div class="blog-item-date w-full h-auto flex flex-row justify-between">
                    <p class="body-12">{{ article.published_at | date: "%B %d, %Y" }}</p>
                </div>
                <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
                    <h3 class="body-14-medium">{{ article.title }}</h3>
                    <p class="body-12">{{ article.content | truncate: 200 }}</p>
                </div>
                <div class="blog-item-cta w-full h-auto flex items-center justify-start">
                    <div class="cta-blog">
                        <a href="{{ article.url }}">
                            <p class="body-14-medium">Leggi di più</p>
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    {% endif %}
    {% endif %}
</div>

<!-- Layout for Press Room (Hidden by default) -->
<div id="pressroom-layout" class="blogs-list-container press-room hidden w-full h-auto flex flex-col gap-y-3">
    <!-- Press Room articles loop -->
    {% for article in blogs['news'].articles %}
    {% if article.tags contains 'Press room' %}
    <div class="blog-item-press-room w-full h-auto flex flex-col gap-y-4 p-4">
        <div class="blog-item-image w-full h-auto">
            <img src="{{ article.image | img_url: 'master' }}"
                class="w-full h-auto min-h-[220px] max-h-[220px] object-cover rounded-xl" alt="article image">
        </div>
        <div class="blog-item-date w-full h-auto flex flex-row justify-between">
            <p class="body-12">{{ article.published_at | date: "%B %d, %Y" }}</p>
        </div>
        <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
            <h3 class="body-14-medium">{{ article.title }}</h3>
            <p class="body-12">{{ article.content | truncate: 100 }}</p>
        </div>
        <div class="blog-item-cta w-full h-auto flex items-center justify-start">
            <div class="cta-download">
                <a href="{{ article.url }}">
                    <p class="body-14-medium">Download</p>
                </a>
                {% render 'download-icon' %}
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>

<!-- Layout for Awards (Hidden by default) -->
<div id="awards-layout" class="blogs-list-container awards hidden w-full h-auto flex flex-col gap-y-3">
    <!-- Awards articles loop -->
    {% for article in blogs['news'].articles %}
    {% if article.tags contains 'Awards' %}
    <a href="{{ article.url }}">
        <div class="blog-item-awards w-full h-auto flex flex-col gap-y-4 p-4">
            <div class="blog-item-image w-full h-auto">
                <img src="{{ article.image | img_url: 'master' }}"
                    class="w-full h-auto min-h-[220px] max-h-[220px] object-cover rounded-xl" alt="article image">
            </div>
            <div class="blog-item-date w-full h-auto flex flex-row justify-between">
                <p class="body-12">{{ article.published_at | date: "%B %d, %Y" }}</p>
            </div>
            <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-2">
                <h3 class="body-14-medium">{{ article.title }}</h3>
                <p class="body-12">{{ article.content | truncate: 100 }}</p>
            </div>
        </div>
    </a>
    {% endif %}
    {% endfor %}
</div>




<script>
    document.addEventListener('DOMContentLoaded', function () {
        const chips = document.querySelectorAll('.chips-label');
        const newsLayout = document.getElementById('news-layout');
        const pressRoomLayout = document.getElementById('pressroom-layout');
        const awardsLayout = document.getElementById('awards-layout');

        chips.forEach(chip => {
            chip.addEventListener('click', function () {
                const tag = chip.getAttribute('data-tag');

                // Nascondi tutti i layout
                newsLayout.classList.add('hidden');
                pressRoomLayout.classList.add('hidden');
                awardsLayout.classList.add('hidden');

                // Mostra il layout corretto in base al tag selezionato
                if (tag === 'News') {
                    newsLayout.classList.remove('hidden');
                } else if (tag === 'Press room') {
                    pressRoomLayout.classList.remove('hidden');
                } else if (tag === 'Awards') {
                    awardsLayout.classList.remove('hidden');
                }

                // Rimuovi la classe 'active' da tutte le chips
                chips.forEach(chip => chip.classList.remove('chips-blog-active'));

                // Aggiungi la classe 'active' alla chips cliccata
                chip.classList.add('chips-blog-active');
            });
        });

        // Imposta la chips 'News' come attiva di default e mostra il layout 'news-layout'
        const defaultChip = document.querySelector('.chips-label[data-tag="News"]');
        if (defaultChip) {
            defaultChip.classList.add('chips-blog-active');
            newsLayout.classList.remove('hidden');
        }
    });
</script>