<!-- News Articles -->
<div id="news-layout" class="blog-news-container w-full flex flex-col overflow-x-hidden px-6 mb-14 lg:px-10">

  <!--container arrow carousel-->
   <!-- arrows box -->
   <div class="w-full h-auto hidden lg:flex lg:justify-end lg:gap-x-6 lg:px-10">
    <div class="w-auto h-auto flex-row inline-flex gap-x-4 rounded-full  bg-[#F7F7F7] px-4 py-2 hover:bg-[#A9A09E] transition-all duration-150 ease-in cursor-pointer">
      <button id="prev-news-Arrow" class="carousel-arrow left-arrow flex items-center justify-center w-6 h-6 text-white">
        {% render 'arrow-left-icon' %}
      </button>
      <button id="next-news-Arrow" class="carousel-arrow right-arrow flex items-center justify-center w-6 h-6 text-white">
        {% render 'arrow-right-icon' %}
      </button>
    </div>
  </div>


  {% if blogs.news %}
  {% assign newsArticles = blogs.news.articles %}
  {% assign articleCount = newsArticles.size %}

  {% if articleCount > 0 %}

  <div class="blog-item-horizontal-scroll-news w-[calc(100%+4rem)] px-8 -mx-8 py-10 h-auto overflow-x-auto flex flex-row gap-x-4 lg:w-[calc(100%+5.5rem)] lg:px-10">
    {% for article in newsArticles %}
      {% assign modResult = forloop.index0 | modulo: 2 %}
      
      {% if article.tags contains "News" and modResult == 0 %}
        <!-- Horizontal Layout -->
        <div
          class="blog-item-horizontal-view w-[353px] min-w-[353px] h-[418px] max-h-[418px] flex flex-col items-start justify-start rounded-b-xl lg:w-[400px] lg:min-w-[400px] lg:min-h-[418px] lg:max-h-[418px]"
          data-tags="{{ article.tags | join: ',' }}">

          <div class="blog-item-image w-full h-auto">
            <img src="{{ article.image | img_url: 'master' }}"
              class="w-full h-auto min-h-[160px] max-h-[160px] object-cover rounded-t-xl lg:min-h-[200px]"
              alt="{{ article.image.alt }}">
          </div>

          <div class="blog-item-info-container w-full h-full p-6 bg-[#F7F7F7] flex flex-col gap-y-6 rounded-b-xl relative">
            {% assign articleDate = article.metafields.custom.article_date.value %}
            {% assign articleLocation = article.metafields.custom.article_location.value %}

            <div class="blog-item-date w-full h-auto flex flex-row items-center justify-between">
              {% if articleDate and articleLocation %}
              <p class="body-12">{{ articleLocation }}</p>
              <p class="body-12">{{ articleDate | date: '%B %d, %Y' }}</p>
              {% endif %}
            </div>
            <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-3">
              <h3 class="body-14 tt-norms-pro-med">{{ article.title | capitalize }}</h3>
              <p class="body-12">{{ article.content | truncate: 100 }}</p>
            </div>

            <div class="blog-item-cta w-full h-auto flex items-center justify-end absolute right-6 bottom-6">
              <a href="{{ article.url }}" class="cta-choco-round h-[32px]">
                <p class="body-14-medium">{{ section.settings.article_cta }}</p>
              </a>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div class="blog-item-column-layout w-full flex flex-col gap-y-4 lg:flex-row lg:flex-wrap lg:gap-x-4 lg:items-start lg:justify-center lg:py-10">
    {% for article in newsArticles %}
      {% assign modResult = forloop.index0 | modulo: 2 %}
      
      {% if article.tags contains "News" and modResult != 0 %}
        <!--  Vertical Layout -->
        <div
          class="blog-item-vertical-view w-full flex flex-col items-start justify-start lg:gap-x-6 lg:flex-col lg:w-[calc(33.3%_-_1rem)] lg:h-[526px] lg:min-h-[526px]"
          data-tags="{{ article.tags | join: ',' }}">

          <div class="blog-item-image w-full lg:w-full">
            <img src="{{ article.image | img_url: 'master' }}"
              class="w-full h-[220px] min-h-[220px] rounded-t-xl object-cover lg:h-[200px]"
              alt="{{ article.image.alt }}">
          </div>

          <div class="blog-item-info w-full flex flex-col gap-y-6 p-6 bg-[#EFEEED] rounded-b-xl lg:w-full lg:relative lg:h-full">
            {% assign articleDate = article.metafields.custom.range_date.value %}
            {% assign articleFlag = article.metafields.custom.press_room_flag.value %}
            {% assign articleLocation = article.metafields.custom.article_location.value %}
             
            <div class="w-full h-auto flex flex-col items-start justify-center gap-y-2">

              <div class="blog-item-date w-full flex flex-row gap-x-2 items-center justify-start gap-y-3">
                {% if articleFlag and articleLocation %}
                <img src="{{ articleFlag |  img_url: 'master' }}" alt="{{ article.title }}">
                <p class="body-12">{{ articleLocation }}</p>
                {% endif %}
              </div>
              
              <div class="w-full h-auto flex flex-col items-start justify-center gap-y-1">
                <h3 class="body-14 tt-norms-pro-med">{{ article.title | capitalize }}</h3>
                <p class="body-12">{{ article.content | truncate: 200 }}</p>
              </div>
            </div>

            <div class="w-full h-auto flex items-start justify-center">
              {% if articleDate %}
                <div class="w-full h-auto flex flex-row items-center justify-start rounded-xl bg-white p-4">
                  <span class="mr-1">&bull;</span><p class="text-[10px] leading-[16px]">{{ articleDate }}</p>
                </div>
              {% endif %}
            </div>

            <div class="blog-item-cta w-full flex items-center justify-end lg:absolute lg:right-6 lg:bottom-6">
              <a href="{{ article.url }}" class="cta-choco-round h-[32px]">
                <p class="body-14-medium">{{ section.settings.article_cta }}</p>
              </a>
            </div>

          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  {% else %}
  <!-- No Articles Found Message -->
  <p class="text-center body-12">No articles found under the "News" tag.</p>
  {% endif %}
  {% endif %}
</div>

<!-- News Articles: Pressroom -->
<div id="pressroom-layout"
  class="blog-pressroom-container w-full h-auto flex flex-col items-start justify-center px-6 py-10 hidden">

  {% if blogs.news %}
  {% assign newsArticles = blogs.news.articles %}
  {% if newsArticles.size > 0 %}
  <!-- Horizontal Scroll Row -->
  <div
    class="blog-item-horizontal-scroll w-full h-auto flex flex-col items-start justify-center gap-y-4 lg:flex-row lg:flex-wrap lg:items-center lg:justify-start lg:gap-x-4">
    {% for article in newsArticles %}
    {% if article.tags contains "Press Room" %}
    <div
      class="blog-item-horizontal-view w-full h-auto flex flex-col items-start justify-start rounded-b-xl flex-shrink-0 lg:w-[calc(33.3%_-_1rem)]"
      data-tags="{{ article.tags | join: ',' }}">

      <!-- Article Image -->
      <div class="blog-item-image w-full h-auto">
        <img src="{{ article.image | img_url: 'master' }}"
          class="w-full h-auto min-h-[160px] max-h-[160px] object-cover rounded-t-xl lg:min-h-[200px]"
          alt="{{ article.image.alt }}">
      </div>

      <!-- Article Info Container -->
      <div class="blog-item-info-container w-full h-auto p-6 bg-[#F7F7F7] flex flex-col gap-y-6 rounded-b-xl">

        <!-- Optional Article Flags -->
        {% assign articleFlag = article.metafields.custom.press_room_flag.value %}
        {% assign articleCountry = article.metafields.custom.press_room_location.value %}

        {% if articleFlag and articleCountry %}
        <div class="product-item-main-primary w-full h-auto flex flex-row items-center justify-start gap-x-2">
          <img src="{{ articleFlag | img_url: 'master' }}" alt="{{ articleFlag.alt }}"
            class="w-5 h-4 object-cover object-center">
          <p class="caption">{{ articleCountry }}</p>
        </div>
        {% endif %}

        <!-- Article Title and Content -->
        <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-3">
          <h3 class="text-[24px] leading-[24px] tt-norms-pro-med">{{ article.title | capitalize }}</h3>
          <p class="body-14">{{ article.content | truncate: 100 }}</p>
        </div>

        <!-- Call-to-Actions -->
        <div class="blog-item-cta w-full h-auto flex flex-row gap-x-3 items-center justify-end">
          <a href="{{ article.url }}" class="cta-transparent-round h-[32px]">
            <p class="body-14-medium">{{ section.settings.article_cta_pressroom | default: "Read more" }}</p>
          </a>
          <a href="{{ article.url }}" class="cta-choco-round text-white h-[32px]">
            <p class="body-14-medium">{{ section.settings.article_cta_pressroom_download | default: "Download" }}</p>
            {% render 'download-icon' %}
          </a>
        </div>

      </div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
  {% else %}
  <!-- No Articles Found Message -->
  <p class="text-center body-12">No articles found under the "Pressroom" tag.</p>
  {% endif %}
  {% endif %}
</div>


<!-- News Articles: Awards -->
<div id="awards-layout"
  class="blog-awards-container w-full h-auto flex flex-col items-start justify-center px-6 py-10  hidden">
  {% if blogs.news %}
  {% assign newsArticles = blogs.news.articles %}
  {% if newsArticles.size > 0 %}
  <!-- Horizontal Scroll Row -->
  <div
    class="blog-item-horizontal-scroll w-full h-auto flex flex-col items-start justify-center gap-y-4 lg:flex-row lg:flex-wrap lg:items-center lg:justify-start lg:gap-x-4">
    {% for article in newsArticles %}
    {% if article.tags contains "Awards" %}
    <div
      class="blog-item-horizontal-view w-full h-auto flex flex-col items-start justify-start rounded-b-xl flex-shrink-0 lg:w-[calc(33.3%_-_1rem)]"
      data-tags="{{ article.tags | join: ',' }}">

      <div class="blog-item-image w-full h-auto">
        <img src="{{ article.image | img_url: 'master' }}"
          class="w-full h-auto min-h-[160px] max-h-[160px] object-cover rounded-t-xl lg:min-h-[200px]"
          alt="{{ article.image.alt }}">
      </div>

      <div class="blog-item-info-container w-full h-auto p-6 bg-[#F7F7F7] flex flex-col gap-y-6 rounded-b-xl">
        <div class="blog-item-date w-full h-auto">
          <p class="body-12">{{ article.published_at | date: '%B %d, %Y' }}</p>
        </div>
        <div class="blog-item-info w-full h-auto flex flex-col items-start justify-center gap-y-3">
          <h3 class="text-[24px] leading-[24px] tt-norms-pro-med">{{ article.title | capitalize }}</h3>
          <p class="body-14">{{ article.content | truncate: 100 }}</p>
        </div>
        <div class="blog-item-cta w-full h-auto flex items-center justify-end">
          <a href="{{ article.url }}" class="cta-choco-round h-[32px]">
            <p class="body-14-medium">{{ section.settings.article_cta }}</p>
          </a>
        </div>
      </div>

    </div>
    {% endif %}
    {% endfor %}
  </div>
  {% else %}
  <!-- No Articles Found Message -->
  <p class="text-center body-12">No articles found under the "Pressroom" tag.</p>
  {% endif %}
  {% endif %}
</div>
</div>


<style>
  .carousel-arrow.disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  .carousel-arrow:not(.disabled) {
    opacity: 1;
    pointer-events: auto;
  }
</style>



<script>
document.addEventListener('DOMContentLoaded', function () {
  const prevArrow = document.getElementById('prev-news-Arrow');
  const nextArrow = document.getElementById('next-news-Arrow');
  const scrollContainer = document.querySelector('.blog-item-horizontal-scroll-news');

  if (!scrollContainer || !prevArrow || !nextArrow) {
      console.error('Error: Scroll container or arrows not found.');
      return;
  }

 
  const cards = Array.from(scrollContainer.children);
  if (cards.length === 0) {
      console.error('Error: No cards found inside the scroll container.');
      return;
  }

  
  const cardWidth = cards[0].offsetWidth;
  const cardMarginRight = parseInt(getComputedStyle(cards[0]).marginRight || '0', 10);
  const scrollAmount = cardWidth + cardMarginRight;

  function updateArrows() {
      const currentScrollLeft = scrollContainer.scrollLeft;
      const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;

      prevArrow.classList.toggle('disabled', currentScrollLeft === 0);
      nextArrow.classList.toggle('disabled', currentScrollLeft >= maxScrollLeft);
  }

  function scrollContainerBy(amount) {
      const currentScrollLeft = scrollContainer.scrollLeft;
      const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;

      let newScrollLeft = Math.min(Math.max(currentScrollLeft + amount, 0), maxScrollLeft);

      scrollContainer.scrollTo({
          left: newScrollLeft,
          behavior: 'smooth'
      });

      setTimeout(updateArrows, 300); 
  }

  prevArrow.addEventListener('click', function () {
      scrollContainerBy(-scrollAmount);
  });

  nextArrow.addEventListener('click', function () {
      scrollContainerBy(scrollAmount);
  });

  updateArrows();
  scrollContainer.addEventListener('scroll', updateArrows);
});

</script>



{% comment %}
Section Schema Settings here;
{% endcomment %}

{% schema %}
{
"name": "blog-list",
"settings": [
{
"type": "text",
"id": "article_download_cta",
"default": "Download",
"label": "Article Download Cta",
"info": "Set the cta text"
}, {
"type": "text",
"id": "article_cta",
"default": "Read More",
"label": "Article Cta",
"info": "Set the cta text"
}
]
}{% endschema %}